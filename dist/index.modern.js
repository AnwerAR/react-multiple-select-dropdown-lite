import e,{useState as t,useRef as l,useEffect as n}from"react";function a(){return e.createElement("svg",{className:"msl-close-icn"},e.createElement("line",{x1:"0",y1:"0",x2:"15",y2:"15"}),e.createElement("line",{x1:"0",y1:"15",x2:"15",y2:"0"}))}function s({value:t,deleteAction:l}){return e.createElement("div",{clickable:"true",className:"msl-chip"},"object"==typeof(n=t).label?(null==n?void 0:n.title)||n.value:n.label,e.createElement("div",{role:"button",clickable:"true","aria-label":"delete-value",onClick:l,onKeyPress:l,tabIndex:"0",className:"msl-btn msl-chip-delete msl-flx"},e.createElement(a,null)),e.createElement("span",null));var n}function i(){return e.createElement("svg",{className:"msl-arrow-icn"},e.createElement("line",{x1:"10",y1:"15",x2:"2",y2:"7"}),e.createElement("line",{x1:"18",y1:"7",x2:"10",y2:"15"}))}function o({opts:t,singleSelect:l,addValue:n,checkValueExist:a,value:s,largeData:i,menuOpen:o}){if(i&&!o)return null;const r=[];return function t(i){for(const[o,c]of i.entries())"group"===c.type?(r.push(e.createElement("div",{key:c.title+o,"data-msl":!0,className:"msl-grp-title"},c.title)),c.childs.length>0?t(c.childs):r.push(e.createElement("option",{className:"msl-option msl-option-disable"},c.emptyDataLabel||"No Data Found"))):r.push(e.createElement("div",Object.assign({tabIndex:"0",key:c.value+c.label+o+10},!l&&{"data-msl":!0},{style:{...c.style&&c.style},onClick:()=>{!c.disabled&&n(c)},onKeyPress:e=>{"Enter"===e.key&&!c.disabled&&n(c)},title:"object"==typeof c.label?null==c?void 0:c.title:c.label,className:`msl-option ${a(c,s)?"msl-option-active":""} ${c.disabled?"msl-option-disable":""} ${void 0!==c.classes?c.classes:""}`,value:c.value}),c.label))}(t),e.createElement("div",null,r)}function r({options:r,downArrowIcon:c,closeIcon:u,clearable:m,downArrow:d,onChange:p,singleSelect:b,jsonValue:h,defaultValue:v,className:g,placeholder:y,disableChip:f,name:E,style:x,attr:N,largeData:k,disabled:w,limit:C,emptyDataLabel:V,customValue:j,onMenuOpen:A,onMenuClose:I,chipAlternateText:L}){const[O,$]=t([]),[D,S]=t(r||[]),[K,P]=t(null),R=l(null),{ref:H,isComponentVisible:M,setIsComponentVisible:T}=function({initialIsVisible:e,onClickOutside:a}){const[s,i]=t(e),o=l(null),r=e=>{"Escape"===e.key&&i(!1)},c=e=>{o.current&&!o.current.contains(e.target)&&(document.removeEventListener("keydown",r,!0),document.removeEventListener("click",c,!0),i(!1),a())};return n(()=>(document.addEventListener("keydown",r,!0),document.addEventListener("click",c,!0),()=>{document.removeEventListener("keydown",r,!0),document.removeEventListener("click",c,!0)})),{ref:o,isComponentVisible:s,setIsComponentVisible:i}}({initialIsVisible:!1,onClickOutside:I}),F=`calc(100% - ${m&&d?60:d||m?40:5}px)`;n(()=>{S(r)},[r]),n(()=>{let e=((e,t)=>{if(!e)return[];let l=e;const n=[],a=[];"string"==typeof e&&(l=e.split(","));const s=e=>{if("string"==typeof e)n.push({label:e,value:e});else if("object"==typeof e){const t={label:e,value:e};"label"in e&&"string"==typeof e.label?t.label=e.label:"title"in e&&(t.label=e.title),n.push(t)}};for(let e=0;e<l.length;e++)if("string"==typeof l[e]){const n=G(l[e],t,!0,"value");n.length>0?a.push(n[0]):j&&s(l[e])}else if("object"==typeof l[e]){const n=G(l[e].value,t,!0,"value");n.length>0?a.push(n[0]):j&&s(l[e])}let i=[];return n.length&&(i=J(n)),S([...t,...i]),[...a,...n]})(v,D);b&&e.length>0&&(e=[e[0]]),$(e)},[v]);const B=e=>{if($(e),h)p(e);else{let t="";t+=e.map(e=>e.value),p(t)}},U=(e,t)=>t.some(t=>t.value===e.value),q=e=>{let t=[...O];b?t=U(e,O)?[]:[e]:U(e,O)?t=t.filter(t=>t.value!==e.value):(null===C||C>O.length)&&t.push(e),B(t),P(null),R.current&&(R.current.innerHTML="")},z=()=>{B([])},G=(e,t,l,n)=>{const a=[],s=[],i=t=>{for(let u=0;u<t.length;u++){var o;if("group"===(null===(o=t[u])||void 0===o?void 0:o.type))i(t[u].childs);else if(l)l&&t[u][n]===e&&a.push(t[u]);else{var r,c;"object"!=typeof t[u].label&&t[u].label.match(new RegExp(""+e,"gi"))||"object"==typeof t[u].label&&(null===(r=t[u])||void 0===r||null===(c=r.title)||void 0===c?void 0:c.match(new RegExp(""+e,"gi")))?a.push(t[u]):t[u].value.match(new RegExp(""+e,"gi"))&&s.push(t[u])}"object"!=typeof t[u].label||"title"in t[u]||console.warn("[multiselect] you must provide a title property as typeof string, if you want to render jsx in option label")}};return i(t),[...a,...s]},J=e=>{const t=[],l=D.findIndex(e=>"group"===(null==e?void 0:e.type)&&"Custom Values"===(null==e?void 0:e.title));return-1===l?t.push({title:"Custom Values",type:"group",childs:[...e]}):Array.isArray(e)?e.map(e=>D[l].childs.push(e)):"object"==typeof e&&D[l].childs.push(e),S([...D,...t]),t},Q=({target:e})=>{(e=>!(e.hasAttribute("clickable")||e.parentNode.hasAttribute("clickable")||e.parentNode.parentNode.hasAttribute("clickable")||e.parentNode.parentNode.parentNode.hasAttribute("clickable")))(e)&&((e=>{if(e.hasAttribute("dropdown-handle")||e.parentNode.hasAttribute("dropdown-handle")||e.parentNode.parentNode.hasAttribute("dropdown-handle"))return!0})(e)&&M?(T(!1),I()):(T(!0),A(),R.current&&R.current.focus()))},W=e=>(console.log(e),"object"==typeof e.label?(null==e?void 0:e.title)||e.value:e.label);return e.createElement("div",Object.assign({ref:H},N,{onClick:Q,tabIndex:"0",onKeyPress:Q,style:{...x},className:`msl-wrp msl-vars ${g} ${w?"msl-disabled":""}`}),e.createElement("input",{name:E,type:"hidden",value:null==O?void 0:O.map(e=>e.value)}),e.createElement("div",{"data-msl":!0,className:`msl ${M&&(()=>{const e=H.current;var t=e.getBoundingClientRect();return window.innerHeight-(t.top+e.clientHeight)<200?"msl-active-up":"msl-active"})()} `},e.createElement("div",{"data-msl":!0,className:"msl-input-wrp",style:{width:F}},!b&&!f&&O.map((t,l)=>e.createElement(s,{key:"msl-chip-"+(l+11),value:t,deleteAction:()=>(e=>{const t=[...O];t.splice(e,1),B(t)})(l)})),!b&&f&&O.length>0&&e.createElement("span",{className:"msl-single-value","data-msl":!0,style:{width:F}},1===O.length?W(O[0]):`${O.length} ${L}`),b&&1===O.length&&e.createElement("span",{className:"msl-single-value","data-msl":!0,style:{width:F}},W(O[0])),(!b&&!f||!(!b||O.length)||!(b||!f||O.length))&&e.createElement("div",{"data-msl":!0,"data-placeholder":y,className:"msl-input",contentEditable:!w,onKeyUp:e=>{const t=e.target.textContent.trim().replace(/,+/g,"");if(t){const l={label:`Create "${t}"`,value:t},n=G(t,D);n.length?(j&&!G(t,D,!0,"value").length&&n.push(l),P(n)):P(j?[l]:[]);const a=(({label:e,value:t})=>("object"!=typeof e&&e.match(/Create "|"+/g)&&(e=e.replace(/Create "|"+/g,"")),{label:e,value:t}))(l);"Enter"!==e.key&&","!==e.key||(!j||n.length||U(a,O)?K.length>0&&q(K[0]):(J(a),q(l)))}else P(null)},ref:R})),(m||d)&&e.createElement("div",{className:"msl-actions msl-flx"},m&&O.length>0&&e.createElement("div",{role:"button",clickable:"true","aria-label":"close-menu",onClick:z,onKeyPress:z,tabIndex:"0",className:"msl-btn msl-clear-btn msl-flx"},u||e.createElement(a,null)),d&&e.createElement("div",{role:"button",tabIndex:"0","dropdown-handle":"true",className:"msl-btn msl-arrow-btn msl-flx",style:{...M&&{transform:"rotate(180deg)"}}},c||e.createElement(i,null)))),e.createElement("div",{className:"msl-options"},!K&&D.length?e.createElement(o,Object.assign({opts:D},{singleSelect:b,addValue:q,checkValueExist:U,value:O,largeData:k,menuOpen:M})):K&&K.length?e.createElement(o,Object.assign({opts:K},{singleSelect:b,addValue:q,checkValueExist:U,value:O,largeData:k,menuOpen:M})):(K&&!K.length||D&&!D.length)&&e.createElement("option",{className:"msl-option msl-option-disable"},V)))}r.defaultProps={clearable:!0,downArrow:!0,singleSelect:!1,jsonValue:!1,defaultValue:"",disableChip:!1,name:"",style:{},disabled:!1,limit:null,emptyDataLabel:"No Data Found",placeholder:"Select...",onChange:()=>{},options:[{label:"Empty",value:"",disabled:!0,style:{textAlign:"center"}}],customValue:!1,chipAlternateText:"Item Selected"};export default r;
//# sourceMappingURL=index.modern.js.map
