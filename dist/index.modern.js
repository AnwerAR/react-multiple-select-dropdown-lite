import e,{useState as l,useRef as t,useEffect as a}from"react";function n(){return e.createElement("svg",{className:"msl-close-icn"},e.createElement("line",{x1:"0",y1:"0",x2:"15",y2:"15"}),e.createElement("line",{x1:"0",y1:"15",x2:"15",y2:"0"}))}function s(){return e.createElement("svg",{className:"msl-arrow-icn"},e.createElement("line",{x1:"10",y1:"15",x2:"2",y2:"7"}),e.createElement("line",{x1:"18",y1:"7",x2:"10",y2:"15"}))}function r({opts:l,singleSelect:t,addValue:a,checkValueExist:n,value:s,largeData:r,menuOpen:i}){if(r&&!i)return null;const c=[];return function l(r){for(const[i,o]of r.entries())"group"===o.type?(c.push(e.createElement("div",{key:o.title+i,"data-msl":!0,className:"msl-grp-title"},o.title)),o.childs.length>0?l(o.childs):c.push(e.createElement("option",{className:"msl-option msl-option-disable"},o.emptyDataLabel||"No Data Found"))):c.push(e.createElement("option",Object.assign({tabIndex:"0",key:o.value+o.label+i+10},!t&&{"data-msl":!0},{style:{...o.style&&o.style},onClick:()=>{!o.disabled&&a(o)},onKeyPress:e=>{"Enter"===e.key&&!o.disabled&&a(o)},title:o.label,className:`msl-option\n             ${n(o,s)?"msl-option-active":""} \n              ${o.disabled?"msl-option-disable":""} ${void 0!==o.classes?o.classes:""}`,value:o.value}),o.label))}(l),e.createElement("div",null,c)}function i({options:i,width:c,downArrowIcon:o,closeIcon:m,clearable:d,downArrow:u,onChange:p,singleSelect:g,jsonValue:h,defaultValue:b,className:v,placeholder:y,disableChip:E,name:f,style:N,attr:x,largeData:w,disabled:k,limit:$,emptyDataLabel:C,customValue:V}){const[O,S]=l([]),[A,L]=l(i||[]),[D,I]=l(null),j=t(null),{ref:J,isComponentVisible:K,setIsComponentVisible:P}=function(e){const[n,s]=l(!1),r=t(null),i=e=>{"Escape"===e.key&&s(!1)},c=e=>{r.current&&!r.current.contains(e.target)&&(document.removeEventListener("keydown",i,!0),document.removeEventListener("click",c,!0),s(!1))};return a(()=>(document.addEventListener("keydown",i,!0),document.addEventListener("click",c,!0),()=>{document.removeEventListener("keydown",i,!0),document.removeEventListener("click",c,!0)})),{ref:r,isComponentVisible:n,setIsComponentVisible:s}}(),R=e=>{let l=e;"string"==typeof e&&(l=e.split(","));const t=JSON.stringify(A),a=[],n=e=>(a.push({label:e,value:e}),{label:e,value:e}),s=[];for(const e of l){const l=t.match(new RegExp(`{+?.[^{]*?"${e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&").replace(/"/g,"\\\\$&")}"}`,"g"));l?1===l.length?s.push(JSON.parse(l)):l.length>1&&s.push(JSON.parse(`[${l.join(",")}]`)):""!==e&&null!==e&&V&&(n(e),s.push({label:e,value:e}))}return L([...A,...a]),s};a(()=>{L(i)},[i]),a(()=>{let e=[];if(""!==b||b.length>0)if("string"==typeof b)e=R(b),g&&e.length>1&&(e=[e[0]]);else if(Array.isArray(b)&&b.length>0&&"string"!=typeof b[0]){e=b;const l=(e=>{const l=JSON.stringify(A);return e.filter(e=>!JSON.parse(l.match(new RegExp(`{+?.[^{]*?${e.value}"}`,"g"))))})(b);L([...A,...l]),g&&e.length>1&&(e=[e[0]])}else Array.isArray(b)&&b.length>0&&(e=R(b),g&&e.length>1&&(e=[e[0]]));S(e)},[b]);const F=e=>{if(S(e),h)p(e);else{let l="";l+=e.map(e=>e.value),p(l)}},H=(e,l)=>l.some(l=>l.value===e.value),M=({label:e,value:l})=>(e.match(/Create "|"+/g)&&(e=e.replace(/Create "|"+/g,"")),{label:e,value:l}),T=e=>{e=M(e);let l=[...O];g?l=[e]:H(e,O)?l=l.filter(l=>l.value!==e.value):(null===$||$>O.length)&&l.push(e),F(l),I(null),j.current.innerHTML=""},U=e=>{const l=[...O];l.splice(e,1),F(l)},q=()=>{F([])},z=({target:e})=>{(e=>{if(e.hasAttribute("dropdown-handle")||e.parentNode.hasAttribute("dropdown-handle")||e.parentNode.parentNode.hasAttribute("dropdown-handle"))return!0})(e)?P(!K):P(!0)};return e.createElement("div",Object.assign({ref:J},x,{onClick:z,tabIndex:"0",onKeyPress:z,style:{...N,width:c},className:`msl-wrp msl-vars ${v} ${k?"msl-disabled":""}`}),e.createElement("input",{name:f,type:"hidden",value:O.map(e=>e.value)}),e.createElement("div",{"data-msl":!0,className:`msl ${K?"msl-active":""} `},e.createElement("div",{"data-msl":!0,className:"msl-input-wrp",style:{width:"calc(100% - "+(d&&u?"60px":u||d?"40px":"5px")}},!g&&!E&&O.map((l,t)=>e.createElement("div",{key:"msl-chip-"+(t+11),className:"msl-chip"},l.label,e.createElement("div",{role:"button","aria-label":"delete-value",onClick:()=>U(t),onKeyPress:()=>U(t),tabIndex:"0",className:"msl-btn msl-chip-delete msl-flx"},e.createElement(n,null)),e.createElement("span",null))),!g&&E&&1===O.length?e.createElement("span",{className:"msl-single-value","data-msl":!0,style:{width:c-(d&&u?60:u||d?40:5)}},O[0].label,"d"):E&&O.length>1&&e.createElement("span",{className:"msl-single-value","data-msl":!0,style:{width:c-(d&&u?60:u||d?40:5)}},O.length," Selected"),g&&1===O.length&&e.createElement("span",{className:"msl-single-value","data-msl":!0,style:{width:c-(d&&u?60:u||d?40:5)}},O[0].label),(!g&&!E||!(!g||O.length)||!(g||!E||O.length))&&e.createElement("div",{"data-msl":!0,"data-placeholder":y,className:"msl-input",contentEditable:!k,onKeyUp:e=>{const l=e.target.textContent.trim().replace(/,+/g,"");if(l){const t={label:`Create "${l}"`,value:l},a=JSON.stringify(A),n=a.match(new RegExp(`{"label":+?.[^{]*?(${l.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")})+?.[^{]*?}`,"gi"));if(n){const e=JSON.parse(`[${n}]`);V&&!a.match(new RegExp(`{"label":(.[^{]*?)"value":"${l.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}"}`,"gi"))&&e.push(t),I(e)}else I(V?[t]:[]);"Enter"!==e.key&&","!==e.key||(!V||n||H(M(t),O)?D.length>0&&T(D[0]):(L([...A,M(t)]),T(t)))}else I(null)},ref:j})),(d||u)&&e.createElement("div",{className:"msl-actions msl-flx"},d&&O.length>0&&e.createElement("div",{role:"button","aria-label":"close-menu",onClick:q,onKeyPress:q,tabIndex:"0",className:"msl-btn msl-clear-btn msl-flx"},m||e.createElement(n,null)),u&&e.createElement("div",{role:"button",tabIndex:"0","dropdown-handle":"true",className:"msl-btn msl-arrow-btn msl-flx",style:{...K&&{transform:"rotate(180deg)"}}},o||e.createElement(s,null)))),e.createElement("div",{className:"msl-options"},!D&&A.length?e.createElement(r,Object.assign({opts:A},{singleSelect:g,addValue:T,checkValueExist:H,value:O,largeData:w,menuOpen:K})):D&&D.length?e.createElement(r,Object.assign({opts:D},{singleSelect:g,addValue:T,checkValueExist:H,value:O,largeData:w,menuOpen:K})):(D&&!D.length||A&&!A.length)&&e.createElement("option",{className:"msl-option msl-option-disable"},C)))}i.defaultProps={clearable:!0,downArrow:!0,width:300,singleSelect:!1,jsonValue:!1,defaultValue:"",disableChip:!1,name:"",style:{},disabled:!1,limit:null,emptyDataLabel:"No Data Found",placeholder:"Select...",onChange:()=>{},options:[{label:"Empty",value:"",disabled:!0,style:{textAlign:"center"}}],customValue:!1};export default i;
//# sourceMappingURL=index.modern.js.map
